version: ~> 1.0
language: python
python: 3.8
os: linux
dist: bionic
jobs:
  - python: 3.7
  - python: 3.8
cache: pip
before_install:
  - python --version
install:
  - pip install "poetry<2,>=1.0" tox
script:
  - |
    if [[ $TRAVIS_PYTHON_VERSION != "3.7" ]]; then
      tox
    fi
  - poetry install -v && poetry run pytest -s -v tests
